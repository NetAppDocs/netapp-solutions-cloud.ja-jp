---
sidebar: sidebar 
permalink: vmware/vmw-hybrid-overview.html 
keywords: NetApp Solutions, hybrid, multicloud, multi cloud, enterprise hybrid cloud, hyperscalers, vmware 
summary:  
---
= VMware を使用したNetAppハイブリッド マルチクラウドの概要
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ../media/


[role="lead"]
ほとんどの IT 組織はハイブリッド クラウド ファーストのアプローチを採用しています。これらの組織は変革段階にあり、顧客は現在の IT 環境を評価し、評価と検出の取り組みに基づいてワークロードをクラウドに移行しています。

顧客がクラウドに移行する要因としては、弾力性とバースト、データセンターの廃止、データセンターの統合、サポート終了のシナリオ、合併、買収などが挙げられます。この移行の理由は、各組織とそれぞれのビジネス優先順位によって異なります。ハイブリッド クラウドに移行する場合、クラウドの展開と弾力性の力を最大限に引き出すには、クラウド内で適切なストレージを選択することが非常に重要です。



== パブリッククラウドにおける VMware Cloud のオプション

このセクションでは、各クラウド プロバイダーが、それぞれのパブリック クラウド サービス内で VMware Software Defined Data Center (SDDC) および/または VMware Cloud Foundation (VCF) スタックをどのようにサポートするかについて説明します。



=== Azure VMware ソリューション

Azure VMware Solution は、Microsoft Azure パブリック クラウド内で VMware SDDC を完全に機能させることができるハイブリッド クラウド サービスです。 Azure VMware Solution は、Microsoft によって完全に管理およびサポートされ、Azure インフラストラクチャを活用して VMware によって検証されたファーストパーティ ソリューションです。つまり、Azure VMware Solution を導入すると、お客様は、コンピューティング仮想化用の VMware ESXi、ハイパーコンバージド ストレージ用の vSAN、ネットワークとセキュリティ用の NSX を利用できるようになると同時に、Microsoft Azure のグローバルなプレゼンス、クラス最高のデータ センター設備、ネイティブ Azure サービスとソリューションの豊富なエコシステムへの近接性を活用できるようになります。



=== VMware Cloud on AWS

VMware Cloud on AWS は、ネイティブ AWS サービスへの最適化されたアクセスを備えた VMware のエンタープライズクラスの SDDC ソフトウェアを AWS クラウドに提供します。  VMware Cloud Foundation を搭載した VMware Cloud on AWS は、VMware のコンピューティング、ストレージ、ネットワーク仮想化製品 (VMware vSphere、VMware vSAN、VMware NSX) と VMware vCenter Server 管理を統合し、専用の柔軟なベアメタル AWS インフラストラクチャ上で実行できるように最適化されています。



=== Google Cloud VMware エンジン

Google Cloud VMware Engine は、Google Cloud の高性能でスケーラブルなインフラストラクチャと VMware Cloud Foundation スタック（VMware vSphere、vCenter、vSAN、NSX-T）を基盤とする IaaS（Infrastructure as a Service）サービスです。このサービスは、アプリケーションの再設計や運用の再構築に伴うコスト、労力、リスクを負うことなく、既存の VMware ワークロードをオンプレミス環境から Google Cloud Platform にシームレスに移行または拡張することで、クラウドへの迅速な移行を実現します。これは、VMware と緊密に連携して Google が販売およびサポートするサービスです。


NOTE: SDDC プライベート クラウドとNetApp Cloud Volumes のコロケーションにより、最小限のネットワーク遅延で最高のパフォーマンスが実現します。



== 知っていましたか？

使用するクラウドに関係なく、VMware SDDC が展開されると、初期クラスタには次の製品が含まれます。

* コンピューティング仮想化用の VMware ESXi ホストと管理用の vCenter Server アプライアンス
* 各ESXiホストの物理ストレージ資産を組み込んだVMware vSANハイパーコンバージドストレージ
* 仮想ネットワークとセキュリティのための VMware NSX と管理用の NSX Manager クラスタ




== ストレージ構成

ストレージ集約型のワークロードをホストし、クラウド ホストの VMware ソリューションでスケールアウトすることを計画しているお客様の場合、デフォルトのハイパーコンバージド インフラストラクチャでは、コンピューティング リソースとストレージ リソースの両方を拡張する必要があります。

Azure NetApp Files、 Amazon FSx ONTAP、 Cloud Volumes ONTAP （3 大ハイパースケーラーすべてで利用可能）、 Google Cloud NetApp Volumes for Google Cloud などのNetApp Cloud Volumes と統合することで、お客様はストレージを個別に独立して拡張し、必要に応じて SDDC クラスターにコンピューティング ノードのみを追加できるようになりました。



=== 注：

* VMware では、アンバランスなクラスタ構成は推奨されていません。そのため、ストレージを拡張すると、ホストが追加され、TCO が増加します。
* 可能な vSAN 環境は 1 つだけです。したがって、すべてのストレージ トラフィックは実稼働ワークロードと直接競合することになります。
* アプリケーション要件、パフォーマンス、コストを調整するために複数のパフォーマンス層を提供するオプションはありません。
* クラスタ ホスト上に構築された vSAN のストレージ容量の限界に達するのは非常に簡単です。  NetApp Cloud Volumes を使用してストレージを拡張し、アクティブなデータセットをホストするか、使用頻度の低いデータを永続ストレージに階層化します。


Azure NetApp Files、 Amazon FSx ONTAP、 Cloud Volumes ONTAP (3 つの主要ハイパースケーラーすべてで利用可能)、および Google Cloud 向けのGoogle Cloud NetApp Volumes は、ゲスト VM と組み合わせて使用できます。このハイブリッド ストレージ アーキテクチャは、ゲスト オペレーティング システムとアプリケーション バイナリ データを保持する vSAN データストアで構成されます。アプリケーション データは、ゲストベースの iSCSI イニシエーターまたは、それぞれAmazon FSx ONTAP、Cloud Volume ONTAP、 Azure NetApp Files 、 Google Cloud NetApp Volumes (Google Cloud 用) と直接通信する NFS/SMB マウントを介して VM に接続されます。この構成により、vSAN の場合と同様に、使用可能な空き領域は使用されるスラック領域とストレージ ポリシーによって決まるため、ストレージ容量に関する課題を簡単に克服できます。

VMware Cloud on AWS 上の 3 ノードの SDDC クラスターを考えてみましょう。

* 3 ノード SDDC の合計生容量 = 31.1 TB (ノードごとに約 10 TB)。
* 追加のホストを追加する前に維持する必要があるスラックスペース = 25% = (0.25 x 31.1 TB) = 7.7 TB。
* スラックスペースを差し引いた後の使用可能な生の容量 = 23.4TB
* 使用可能な有効な空き容量は、適用されるストレージ ポリシーによって異なります。
+
例えば：

+
** RAID 0 = 有効空き容量 = 23.4TB (使用可能な生の容量/1)
** RAID 1 = 有効空き容量 = 11.7TB (使用可能な生の容量/2)
** RAID 5 = 有効空き容量 = 17.5TB (使用可能な生の容量/1.33)




したがって、 NetApp Cloud Volumes をゲスト接続ストレージとして使用すると、パフォーマンスとデータ保護の要件を満たしながら、ストレージを拡張し、TCO を最適化するのに役立ちます。


NOTE: このドキュメントが書かれた時点では、ゲスト内ストレージのみが利用可能なオプションでした。



=== 覚えておくべきポイント

* ハイブリッド ストレージ モデルでは、Tier 1 または優先度の高いワークロードがホスト自体の一部であり、近接しているため、特定のレイテンシ要件に対応するには、これらのワークロードを vSAN データストアに配置します。トランザクションのレイテンシが許容されるワークロード VM には、ゲスト内メカニズムを使用します。
* NetApp SnapMirrorテクノロジーを使用して、オンプレミスのONTAPシステムからCloud Volumes ONTAPまたはAmazon FSx ONTAPにワークロード データを複製し、ブロック レベルのメカニズムを使用して移行を容易にします。これは、Azure NetApp FilesおよびGoogle Cloud NetApp Volumesには適用されません。  Azure NetApp FilesまたはGoogle Cloud NetApp Volumesにデータを移行するには、使用するファイル プロトコルに応じて、 NetApp XCP、 BlueXP Copy and Sync、rysnc、または robocopy を使用します。
* テストでは、それぞれの SDDC からストレージにアクセスする際に 2 ～ 4 ミリ秒の追加遅延が発生することが示されています。ストレージをマッピングするときには、この追加のレイテンシをアプリケーション要件に考慮に入れてください。
* テスト フェイルオーバーおよび実際のフェイルオーバー中にゲスト接続ストレージをマウントするには、iSCSI イニシエーターが再構成され、SMB 共有の DNS が更新され、fstab で NFS マウント ポイントが更新されていることを確認します。
* ゲスト内の Microsoft マルチパス I/O (MPIO)、ファイアウォール、およびディスク タイムアウトのレジストリ設定が VM 内で適切に構成されていることを確認します。



NOTE: これはゲスト接続ストレージにのみ適用されます。



== NetAppクラウドストレージのメリット

NetAppクラウド ストレージには、次のような利点があります。

* コンピューティングとは独立してストレージを拡張することで、コンピューティングとストレージの密度を向上します。
* ホスト数を削減できるため、全体的な TCO を削減できます。
* コンピューティング ノードの障害はストレージのパフォーマンスに影響を与えません。
* Azure NetApp Filesのボリュームの再形成と動的なサービス レベル機能を使用すると、安定した状態のワークロードに合わせてサイズを設定することでコストを最適化し、過剰なプロビジョニングを防ぐことができます。
* Cloud Volumes ONTAPのストレージ効率、クラウド階層化、インスタンス タイプ変更機能により、ストレージを最適な方法で追加および拡張できます。
* 過剰なプロビジョニングを防ぎ、必要な場合にのみストレージ リソースが追加されます。
* 効率的なスナップショット コピーとクローンにより、パフォーマンスに影響を与えることなく、迅速にコピーを作成できます。
* スナップショット コピーからの迅速なリカバリを使用して、ランサムウェア攻撃に対処します。
* 効率的な増分ブロック転送ベースの地域災害復旧を提供し、地域全体のブロック レベルの統合バックアップにより、より優れた RPO と RTO を実現します。




== 前提

* SnapMirrorテクノロジーまたはその他の関連するデータ移行メカニズムが有効になっています。オンプレミスからハイパースケーラー クラウドまで、さまざまな接続オプションがあります。適切なパスを使用し、関連するネットワーク チームと連携します。
* このドキュメントが書かれた時点では、ゲスト内ストレージのみが利用可能なオプションでした。



NOTE: ストレージと必要なホスト数の計画とサイズ設定については、 NetAppソリューション アーキテクトと各ハイパースケーラー クラウド アーキテクトに依頼してください。  NetApp、Cloud Volumes ONTAP Sizer を使用して適切なスループットでストレージ インスタンス タイプまたは適切なサービス レベルを決定する前に、ストレージ パフォーマンス要件を特定することをお勧めします。



== 詳細なアーキテクチャ

大まかに言えば、このアーキテクチャ (下の図を参照) は、 NetApp Cloud Volumes ONTAP、 Google Cloud NetApp Volumes for Google Cloud、およびAzure NetApp Files を追加のゲスト内ストレージ オプションとして使用して、複数のクラウド プロバイダー間でハイブリッド マルチクラウド接続とアプリの移植性を実現する方法をカバーしています。

image:ehc-architecture.png["エンタープライズハイブリッドクラウドアーキテクチャ"]
